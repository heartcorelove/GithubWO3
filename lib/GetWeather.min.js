function start(){$("#googleMap").hide();getLocation();$("#switch").bind("click",function(){getLocation()})}function getLocation(){$.getJSON("http://freegeoip.net/json/",function(e){useGoogleMaps(e.longitude,e.latitude);getWeather(e.longitude,e.latitude)})}function useGoogleMaps(e,t){var n={center:new google.maps.LatLng(t,e),zoom:10,mapTypeId:google.maps.MapTypeId.ROADMAP};var r=new google.maps.Map(document.getElementById("googleMap"),n);var i=new google.maps.Marker({position:new google.maps.LatLng(t,e)});i.setMap(r);$(document).ajaxComplete(function(e){google.maps.event.trigger(r,"resize");r.setCenter(i.getPosition())})}function getWeather(e,t){console.log(e,t);$("#output").text("Waiting for results...");$.ajax({url:"http://howestproxy.appspot.com/proxer?xml=http://api.worldweatheronline.com/free/v1/weather.ashx?q="+t+"%2C+"+e+"&format=xml&num_of_days=5&key=umk9aaumj5fxra4k56evbqf2",dataType:"xml",success:doLocation,error:showError})}function showError(){alert("Couldn't get the weather information. Please try again!")}function doLocation(e){EuropeanValues=!EuropeanValues;$.getJSON("http://freegeoip.net/json/",function(e){$("#output").text("The results are in for "+e.city+", "+e.region_name+", "+e.country_name)});console.log(e);var t=$(e).find("weather");var n="";var r=$(e).find("current_condition");n="<p class='current'>Current temperature: ";if(EuropeanValues){n+=r.find("temp_C").text()+"&deg;C</p>"}else{n+=r.find("temp_F").text()+"&deg;F</p>"}t.each(function(){var e=$(this).find("date").text();n+="<p class='weather'><a class='date'>Date: "+e+"</a><br>";if(EuropeanValues){var t=$(this).find("tempMaxC").text();var r=$(this).find("tempMinC").text();n+="Max. temperature: "+t+"&deg;C<br> Min. temperature: "+r+"&#176;C <br>";var i=$(this).find("windspeedKmph").text();n+="Windspeed Kph: "+i}else{var s=$(this).find("tempMaxF").text();var o=$(this).find("tempMinF").text();n+="Max. temperature: "+s+"&deg;F <br>Min. temperature: "+o+"&deg;F<br>";var u=$(this).find("windspeedMiles").text();n+="Windspeed Mph: "+u}var a=$(this).find("weatherIconUrl").text();n+="<br><img src='"+a+"'></p>"});switch($(t).find("weathercode")){case 116:$("body").addClass("sunny");break;case 119:$("body").addClass("clouds");break;case 112:$("body").addClass("verycloudy");break;case 226:$("body").addClass("rainy");break;default:$("body").addClass("clouds");break}$("#googleMap").show();$("#results").html(n)}var EuropeanValues=false